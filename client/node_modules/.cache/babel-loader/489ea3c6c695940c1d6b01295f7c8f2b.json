{"ast":null,"code":"import io from \"socket.io-client\";\nimport axios from \"axios\";\nimport { SERVER } from \"./config\";\nexport class Socket {\n  constructor() {\n    this.socket = void 0;\n\n    this.search = (sessionId, searchTerm, openHours, priceRange, services) => new Promise((resolve, reject) => axios.get(`${SERVER}/search/${sessionId}/${searchTerm}/${openHours}/${priceRange}/${services}`).then(result => resolve(result.data)));\n\n    this.setUserName = (sessionId, userId, userName) => new Promise((resolve, reject) => axios.post(`${SERVER}/setUserName/${sessionId}/${userId}/${userName}`).then(result => resolve(result.data)));\n\n    this.addVote = (sessionId, userId, restaurantId, voteNum) => new Promise((resolve, reject) => axios.post(`${SERVER}/addVote/${sessionId}/${userId}/${restaurantId}/${voteNum}`).then(result => resolve(result.data)));\n\n    this.addRestaurant = (sessionId, userId, restaurantId) => new Promise((resolve, reject) => axios.post(`${SERVER}/addRestaurant/${sessionId}/${userId}/${restaurantId}`).then(result => resolve(result.data)));\n\n    this.emit = (data, callback, title) => {\n      console.log(`socket emitting ${title} with data ${JSON.stringify(data)}`);\n      this.socket.emit(title, data, callback);\n    };\n\n    this.newSession = (data, callback) => {\n      this.emit(data, callback, \"newSession\");\n    };\n\n    this.tryJoinSession = (data, callback) => {\n      this.emit(data, callback, \"tryJoinSession\");\n    };\n\n    this.subscribeToVoteAdded = callback => {\n      this.socket.on(\"addedVote\", callback);\n    };\n\n    this.unSubscribeToVoteAdded = () => {\n      this.socket.off(\"addedVote\");\n    };\n\n    this.subscribeToRestaurantAdded = callback => {\n      this.socket.on(\"addedRestaurant\", callback);\n    };\n\n    this.unSubscribeToRestaurantAdded = () => {\n      this.socket.off(\"addedRestaurant\");\n    };\n\n    console.log(`running socket constructor.`);\n    this.socket = io.connect(SERVER);\n  }\n\n}\nlet socket = new Socket();\nconsole.log(\"here.\");\nexport default socket;","map":{"version":3,"sources":["/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/src/socket.ts"],"names":["io","axios","SERVER","Socket","constructor","socket","search","sessionId","searchTerm","openHours","priceRange","services","Promise","resolve","reject","get","then","result","data","setUserName","userId","userName","post","addVote","restaurantId","voteNum","addRestaurant","emit","callback","title","console","log","JSON","stringify","newSession","tryJoinSession","subscribeToVoteAdded","on","unSubscribeToVoteAdded","off","subscribeToRestaurantAdded","unSubscribeToRestaurantAdded","connect"],"mappings":"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","sourcesContent":["import io from \"socket.io-client\";\nimport {\n  NewSessionData,\n  NewSessionCallback,\n  TryJoinSessionData,\n  TryJoinSessionCallback,\n  Business,\n} from \"../../shared/types\";\nimport axios from \"axios\";\nimport { SERVER } from \"./config\";\n\nexport class Socket {\n  socket: SocketIOClient.Socket;\n\n  constructor() {\n    console.log(`running socket constructor.`)\n    this.socket = io.connect(SERVER);\n  }\n\n  search = (sessionId: string, searchTerm: string, openHours:string, priceRange:string, services:string): Promise<Business[]> =>\n    new Promise((resolve, reject) =>\n      axios\n        .get(`${SERVER}/search/${sessionId}/${searchTerm}/${openHours}/${priceRange}/${services}`)\n        .then((result) => resolve(result.data))\n    );\n\n  setUserName = (\n    sessionId: string,\n    userId: string,\n    userName: string\n  ): Promise<boolean> =>\n    new Promise((resolve, reject) =>\n      axios\n        .post(`${SERVER}/setUserName/${sessionId}/${userId}/${userName}`)\n        .then((result) => resolve(result.data))\n    );\n\n  addVote = (\n    sessionId: string,\n    userId: string,\n    restaurantId: string,\n    voteNum: number\n  ): Promise<boolean> =>\n    new Promise((resolve, reject) =>\n      axios\n        .post(\n          `${SERVER}/addVote/${sessionId}/${userId}/${restaurantId}/${voteNum}`\n        )\n        .then((result) => resolve(result.data))\n    );\n\n  addRestaurant = (\n    sessionId: string,\n    userId: string,\n    restaurantId: string\n  ): Promise<boolean> =>\n    new Promise((resolve, reject) =>\n      axios\n        .post(`${SERVER}/addRestaurant/${sessionId}/${userId}/${restaurantId}`)\n        .then((result) => resolve(result.data))\n    );\n\n  emit = (data: any, callback: (p: any) => void, title: string) => {\n    console.log(`socket emitting ${title} with data ${JSON.stringify(data)}`);\n    this.socket.emit(title, data, callback);\n  };\n\n  newSession: (data: NewSessionData, callback: NewSessionCallback) => void = (\n    data,\n    callback\n  ) => {\n    this.emit(data, callback, \"newSession\");\n  };\n\n  tryJoinSession: (\n    data: TryJoinSessionData,\n    callback: TryJoinSessionCallback\n  ) => void = (data, callback) => {\n    this.emit(data, callback, \"tryJoinSession\");\n  };\n\n  subscribeToVoteAdded = (callback: Function) => {\n    this.socket.on(\"addedVote\", callback);\n  };\n\n  unSubscribeToVoteAdded = () => {\n    this.socket.off(\"addedVote\")\n  }  \n\n  subscribeToRestaurantAdded = (callback: Function) => {\n    this.socket.on(\"addedRestaurant\", callback);\n  };\n\n  unSubscribeToRestaurantAdded = () => {\n    this.socket.off(\"addedRestaurant\")\n  }\n}\n\n\n\nlet socket = new Socket();\nconsole.log(\"here.\");\nexport default socket;\n"]},"metadata":{},"sourceType":"module"}