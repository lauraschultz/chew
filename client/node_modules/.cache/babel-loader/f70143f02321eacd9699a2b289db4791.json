{"ast":null,"code":"import _defineProperty from\"/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{faExclamationCircle,faSlidersH}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import React,{useEffect,useReducer,useState}from\"react\";var Filters=function Filters(_ref){var update=_ref.update,updateSearchFormState=_ref.updateSearchFormState,searchFormFilterState=_ref.searchFormFilterState;var initialForm={openDate:\"any\",openNow:false,prices:[0,3],services:{pickup:true,delivery:true,restaurant_reservation:true}};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showFilters=_useState2[0],setShowFilters=_useState2[1];// let location = useLocation();\n// let history = useHistory()\nvar _useReducer=useReducer(formReducer,searchFormFilterState||initialForm),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//   let [[price1, price2], setPrices] = useState<(number | undefined)[]>([0, 3]);\n// let onlyOnePriceSet: boolean;\nuseEffect(function(){updateSearchFormState({filter:state});},[state,updateSearchFormState]);// useEffect(() => {\n//   onlyOnePriceSet = !(state.prices[0]! > -1 && state.prices[1]! > -1);\n// }, [state.prices]);\nvar min=function min(arr){var min=99;arr.forEach(function(n){if(typeof n===\"number\"&&n<min){min=n;}});return min;};useEffect(function(){update({openHours:state.openDate===\"any\"?\"any\":state.openNow?\"now\":\"today\",priceRange:new Array(state.prices[1]===undefined?1:Math.abs(state.prices[0]-state.prices[1])+1).fill(0).map(function(_,idx){return min(state.prices)+1+idx;}).join(\",\"),services:Object.entries(state.services).filter(function(_ref2){var _ref3=_slicedToArray(_ref2,2),_=_ref3[0],b=_ref3[1];return b;}).map(function(_ref4){var _ref5=_slicedToArray(_ref4,2),e=_ref5[0],_=_ref5[1];return e;}).join(\",\")});},[state,update]);var isBetween=function isBetween(n,stops){if(!(typeof stops[0]===\"number\"&&typeof stops[1]===\"number\")){return false;}return stops[0]<n&&n<stops[1]||stops[1]<n&&n<stops[0];};var priceArray=new Array(4).fill(\"\").map(function(a,b){return\"$\".repeat(b+1);});var selectedPriceStyles=\"bg-theme-blue text-white px-1 py-2 rounded-full z-30 \";var intermediatePriceStyles=\"bg-theme-blue-l-3 text-black py-1 px-4 -mx-2 z-20 \";return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"m-1 px-2 py-1 text-theme-blue border border-theme-blue bg-white rounded shadow font-bold text-sm uppercase tracking-wide\",onClick:function onClick(){return setShowFilters(!showFilters);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSlidersH,className:\"mr-2\"}),showFilters?\"hide\":\"show\",\" filters\"),/*#__PURE__*/React.createElement(\"div\",{className:\"px-2 pb-2 flex flex-wrap border-b border-theme-extra-light-gray \"+(showFilters?\"\":\"hidden\")},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full sm:w-1/2\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\"},\"Price Range\"),/*#__PURE__*/React.createElement(\"div\",{className:\"group mt-1 ml-2 mb-3 text-sm\"},priceArray.map(function(d,idx){return/*#__PURE__*/React.createElement(\"button\",{type:\"button\",key:idx,onClick:function onClick(){return dispatch({key:\"price\",newVal:idx});},className:\"relative px-2 \"+(state.prices.includes(idx)?selectedPriceStyles:\"\")+(isBetween(idx,state.prices)?intermediatePriceStyles:\"\")},d);})),/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\"},\"Open Hours\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1\",checked:state.openDate===\"any\",type:\"radio\",name:\"day\",onChange:function onChange(){return dispatch({newVal:\"any\",key:\"openDate\"});}}),\"Any time\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1\",checked:state.openDate===\"today\",type:\"radio\",name:\"day\",onChange:function onChange(){return dispatch({newVal:\"today\",key:\"openDate\"});}}),\"Today\",/*#__PURE__*/React.createElement(\"label\",{className:\"block px-4 -mt-1 mb-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1\",checked:state.openNow,type:\"checkbox\",onChange:function onChange(){return dispatch({key:\"openNow\"});}}),\"Open now\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full sm:w-1/2\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\"},\"Services Offered\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1\",checked:state.services.pickup,type:\"checkbox\",onChange:function onChange(){return dispatch({key:\"pickup\"});}}),\"Pickup\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1\",checked:state.services.delivery,type:\"checkbox\",onChange:function onChange(){return dispatch({key:\"delivery\"});}}),\"Delivery\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1\",checked:state.services.restaurant_reservation,type:\"checkbox\",onChange:function onChange(){return dispatch({key:\"restaurant_reservation\"});}}),\"Restaurant reservation\"),/*#__PURE__*/React.createElement(\"div\",{className:!(state.services.pickup||state.services.delivery||state.services.restaurant_reservation)?\"mx-6 my-1 bg-white bg-opacity-50 border-l-4 border-orange-500 px-2 py-1 rounded text-sm italic\":\"hidden\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faExclamationCircle,className:\"text-orange-500 mr-2\"}),\"Please select at least one service.\"))));};function formReducer(prevState,update){var stateUpdates={};if(update.key===\"openDate\"){if(update.newVal===\"any\"){stateUpdates.openDate=\"any\";stateUpdates.openNow=false;}else{stateUpdates.openDate=\"today\";}}else if(update.key===\"openNow\"){stateUpdates.openNow=!prevState.openNow;if(stateUpdates.openNow){stateUpdates.openDate=\"today\";}}else if(update.key===\"delivery\"||update.key===\"pickup\"||update.key===\"restaurant_reservation\"){stateUpdates.services=_objectSpread(_objectSpread({},prevState.services),{},_defineProperty({},update.key,!prevState.services[update.key]));}else if(update.key===\"price\"){if(typeof prevState.prices[0]===\"number\"&&typeof prevState.prices[1]===\"number\"){stateUpdates.prices=[update.newVal,undefined];}else if(typeof prevState.prices[0]===\"number\"){stateUpdates.prices=[prevState.prices[0],update.newVal];}}var newState=_objectSpread(_objectSpread({},prevState),stateUpdates);// window.history.replaceState({\n//   ...window.history.state,\n//   filter: JSON.stringify(newState)\n// }, \"\")\nreturn newState;}export default Filters;","map":{"version":3,"sources":["/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/src/Filters.tsx"],"names":["faExclamationCircle","faSlidersH","FontAwesomeIcon","React","useEffect","useReducer","useState","Filters","update","updateSearchFormState","searchFormFilterState","initialForm","openDate","openNow","prices","services","pickup","delivery","restaurant_reservation","showFilters","setShowFilters","formReducer","state","dispatch","filter","min","arr","forEach","n","openHours","priceRange","Array","undefined","Math","abs","fill","map","_","idx","join","Object","entries","b","e","isBetween","stops","priceArray","a","repeat","selectedPriceStyles","intermediatePriceStyles","d","key","newVal","includes","prevState","stateUpdates","newState"],"mappings":"qjBAAA,OACEA,mBADF,CAEEC,UAFF,KAGO,mCAHP,CAIA,OAASC,eAAT,KAAgC,gCAAhC,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,UAA3B,CAAuCC,QAAvC,KAAuD,OAAvD,CAIA,GAAMC,CAAAA,OAIJ,CAAG,QAJCA,CAAAA,OAID,MAA8D,IAA3DC,CAAAA,MAA2D,MAA3DA,MAA2D,CAAnDC,qBAAmD,MAAnDA,qBAAmD,CAA5BC,qBAA4B,MAA5BA,qBAA4B,CACjE,GAAMC,CAAAA,WAAuB,CAAG,CAC9BC,QAAQ,CAAE,KADoB,CAE9BC,OAAO,CAAE,KAFqB,CAG9BC,MAAM,CAAE,CAAC,CAAD,CAAI,CAAJ,CAHsB,CAI9BC,QAAQ,CAAE,CACRC,MAAM,CAAE,IADA,CAERC,QAAQ,CAAE,IAFF,CAGRC,sBAAsB,CAAE,IAHhB,CAJoB,CAAhC,CADiE,cAW7BZ,QAAQ,CAAC,KAAD,CAXqB,wCAW5Da,WAX4D,eAW/CC,cAX+C,eAYjE;AACA;AAbiE,gBAcvCf,UAAU,CAACgB,WAAD,CAAcX,qBAAqB,EAAIC,WAAvC,CAd6B,4CAc1DW,KAd0D,iBAcnDC,QAdmD,iBAejE;AACA;AAEAnB,SAAS,CAAC,UAAM,CACdK,qBAAqB,CAAC,CAACe,MAAM,CAAEF,KAAT,CAAD,CAArB,CACD,CAFQ,CAEN,CAACA,KAAD,CAAQb,qBAAR,CAFM,CAAT,CAIA;AACA;AACA;AAEA,GAAMgB,CAAAA,GAAG,CAAG,aAACC,GAAD,CAAiC,CAC3C,GAAID,CAAAA,GAAG,CAAG,EAAV,CACAC,GAAG,CAACC,OAAJ,CAAY,SAACC,CAAD,CAAO,CACjB,GAAI,MAAOA,CAAAA,CAAP,GAAa,QAAb,EAAyBA,CAAC,CAAGH,GAAjC,CAAsC,CACpCA,GAAG,CAAGG,CAAN,CACD,CACF,CAJD,EAKA,MAAOH,CAAAA,GAAP,CACD,CARD,CAUArB,SAAS,CAAC,UAAM,CACdI,MAAM,CAAC,CACLqB,SAAS,CACPP,KAAK,CAACV,QAAN,GAAmB,KAAnB,CAA2B,KAA3B,CAAmCU,KAAK,CAACT,OAAN,CAAgB,KAAhB,CAAwB,OAFxD,CAGLiB,UAAU,CAAE,GAAIC,CAAAA,KAAJ,CACVT,KAAK,CAACR,MAAN,CAAa,CAAb,IAAoBkB,SAApB,CACI,CADJ,CAEIC,IAAI,CAACC,GAAL,CAASZ,KAAK,CAACR,MAAN,CAAa,CAAb,EAAmBQ,KAAK,CAACR,MAAN,CAAa,CAAb,CAA5B,EAAgD,CAH1C,EAKTqB,IALS,CAKJ,CALI,EAMTC,GANS,CAML,SAACC,CAAD,CAAIC,GAAJ,QAAYb,CAAAA,GAAG,CAACH,KAAK,CAACR,MAAP,CAAH,CAAoB,CAApB,CAAwBwB,GAApC,EANK,EAOTC,IAPS,CAOJ,GAPI,CAHP,CAWLxB,QAAQ,CAAEyB,MAAM,CAACC,OAAP,CAAenB,KAAK,CAACP,QAArB,EACPS,MADO,CACA,kDAAEa,CAAF,UAAKK,CAAL,gBAAYA,CAAAA,CAAZ,EADA,EAEPN,GAFO,CAEH,kDAAEO,CAAF,UAAKN,CAAL,gBAAYM,CAAAA,CAAZ,EAFG,EAGPJ,IAHO,CAGF,GAHE,CAXL,CAAD,CAAN,CAgBD,CAjBQ,CAiBN,CAACjB,KAAD,CAAQd,MAAR,CAjBM,CAAT,CAmBA,GAAMoC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAAChB,CAAD,CAAYiB,KAAZ,CAA8C,CAC9D,GAAI,EAAE,MAAOA,CAAAA,KAAK,CAAC,CAAD,CAAZ,GAAoB,QAApB,EAAgC,MAAOA,CAAAA,KAAK,CAAC,CAAD,CAAZ,GAAoB,QAAtD,CAAJ,CAAqE,CACnE,MAAO,MAAP,CACD,CACD,MAAQA,CAAAA,KAAK,CAAC,CAAD,CAAL,CAAWjB,CAAX,EAAgBA,CAAC,CAAGiB,KAAK,CAAC,CAAD,CAA1B,EAAmCA,KAAK,CAAC,CAAD,CAAL,CAAWjB,CAAX,EAAgBA,CAAC,CAAGiB,KAAK,CAAC,CAAD,CAAnE,CACD,CALD,CAMA,GAAMC,CAAAA,UAAU,CAAG,GAAIf,CAAAA,KAAJ,CAAU,CAAV,EAAaI,IAAb,CAAkB,EAAlB,EAAsBC,GAAtB,CAA0B,SAACW,CAAD,CAAIL,CAAJ,QAAU,IAAIM,MAAJ,CAAWN,CAAC,CAAG,CAAf,CAAV,EAA1B,CAAnB,CACA,GAAMO,CAAAA,mBAAmB,CACvB,uDADF,CAEA,GAAMC,CAAAA,uBAAuB,CAC3B,oDADF,CAGA,mBACE,qDACE,8BACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,0HAFZ,CAGE,OAAO,CAAE,yBAAM9B,CAAAA,cAAc,CAAC,CAACD,WAAF,CAApB,EAHX,eAKE,oBAAC,eAAD,EAAiB,IAAI,CAAElB,UAAvB,CAAmC,SAAS,CAAC,MAA7C,EALF,CAMGkB,WAAW,CAAG,MAAH,CAAY,MAN1B,YADF,cASE,2BACE,SAAS,CACP,oEACCA,WAAW,CAAG,EAAH,CAAQ,QADpB,CAFJ,eAME,2BAAK,SAAS,CAAC,iBAAf,eACE,4BAAM,SAAS,CAAC,+DAAhB,gBADF,cAKE,2BAAK,SAAS,CAAC,8BAAf,EACG2B,UAAU,CAACV,GAAX,CAAe,SAACe,CAAD,CAAIb,GAAJ,qBACd,8BACE,IAAI,CAAC,QADP,CAEE,GAAG,CAAEA,GAFP,CAGE,OAAO,CAAE,yBAAMf,CAAAA,QAAQ,CAAC,CAAE6B,GAAG,CAAE,OAAP,CAAgBC,MAAM,CAAEf,GAAxB,CAAD,CAAd,EAHX,CAIE,SAAS,CACP,kBACChB,KAAK,CAACR,MAAN,CAAawC,QAAb,CAAsBhB,GAAtB,EAA6BW,mBAA7B,CAAmD,EADpD,GAECL,SAAS,CAACN,GAAD,CAAMhB,KAAK,CAACR,MAAZ,CAAT,CAA+BoC,uBAA/B,CAAyD,EAF1D,CALJ,EAUGC,CAVH,CADc,EAAf,CADH,CALF,cAqBE,4BAAM,SAAS,CAAC,+DAAhB,eArBF,cAwBE,6BAAO,SAAS,CAAC,YAAjB,eACE,6BACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE7B,KAAK,CAACV,QAAN,GAAmB,KAF9B,CAGE,IAAI,CAAC,OAHP,CAIE,IAAI,CAAC,KAJP,CAKE,QAAQ,CAAE,0BAAMW,CAAAA,QAAQ,CAAC,CAAE8B,MAAM,CAAE,KAAV,CAAiBD,GAAG,CAAE,UAAtB,CAAD,CAAd,EALZ,EADF,YAxBF,cAkCE,6BAAO,SAAS,CAAC,YAAjB,eACE,6BACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE9B,KAAK,CAACV,QAAN,GAAmB,OAF9B,CAGE,IAAI,CAAC,OAHP,CAIE,IAAI,CAAC,KAJP,CAKE,QAAQ,CAAE,0BAAMW,CAAAA,QAAQ,CAAC,CAAE8B,MAAM,CAAE,OAAV,CAAmBD,GAAG,CAAE,UAAxB,CAAD,CAAd,EALZ,EADF,sBASE,6BAAO,SAAS,CAAC,uBAAjB,eACE,6BACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE9B,KAAK,CAACT,OAFjB,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAE,0BAAMU,CAAAA,QAAQ,CAAC,CAAE6B,GAAG,CAAE,SAAP,CAAD,CAAd,EAJZ,EADF,YATF,CAlCF,CANF,cA4DE,2BAAK,SAAS,CAAC,iBAAf,eACE,4BAAM,SAAS,CAAC,+DAAhB,qBADF,cAIE,6BAAO,SAAS,CAAC,YAAjB,eACE,6BACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE9B,KAAK,CAACP,QAAN,CAAeC,MAF1B,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAE,0BAAMO,CAAAA,QAAQ,CAAC,CAAE6B,GAAG,CAAE,QAAP,CAAD,CAAd,EAJZ,EADF,UAJF,cAaE,6BAAO,SAAS,CAAC,YAAjB,eACE,6BACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE9B,KAAK,CAACP,QAAN,CAAeE,QAF1B,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAE,0BAAMM,CAAAA,QAAQ,CAAC,CAAE6B,GAAG,CAAE,UAAP,CAAD,CAAd,EAJZ,EADF,YAbF,cAsBE,6BAAO,SAAS,CAAC,YAAjB,eACE,6BACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE9B,KAAK,CAACP,QAAN,CAAeG,sBAF1B,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAE,0BAAMK,CAAAA,QAAQ,CAAC,CAAE6B,GAAG,CAAE,wBAAP,CAAD,CAAd,EAJZ,EADF,0BAtBF,cA+BE,2BACE,SAAS,CACP,EACE9B,KAAK,CAACP,QAAN,CAAeC,MAAf,EACAM,KAAK,CAACP,QAAN,CAAeE,QADf,EAEAK,KAAK,CAACP,QAAN,CAAeG,sBAHjB,EAKI,gGALJ,CAMI,QARR,eAWE,oBAAC,eAAD,EACE,IAAI,CAAElB,mBADR,CAEE,SAAS,CAAC,sBAFZ,EAXF,uCA/BF,CA5DF,CATF,CADF,CA0HD,CAjMD,CAmMA,QAASqB,CAAAA,WAAT,CACEkC,SADF,CAEE/C,MAFF,CAGc,CACZ,GAAMgD,CAAAA,YAAiC,CAAG,EAA1C,CACA,GAAIhD,MAAM,CAAC4C,GAAP,GAAe,UAAnB,CAA+B,CAC7B,GAAI5C,MAAM,CAAC6C,MAAP,GAAkB,KAAtB,CAA6B,CAC3BG,YAAY,CAAC5C,QAAb,CAAwB,KAAxB,CACA4C,YAAY,CAAC3C,OAAb,CAAuB,KAAvB,CACD,CAHD,IAGO,CACL2C,YAAY,CAAC5C,QAAb,CAAwB,OAAxB,CACD,CACF,CAPD,IAOO,IAAIJ,MAAM,CAAC4C,GAAP,GAAe,SAAnB,CAA8B,CACnCI,YAAY,CAAC3C,OAAb,CAAuB,CAAC0C,SAAS,CAAC1C,OAAlC,CACA,GAAI2C,YAAY,CAAC3C,OAAjB,CAA0B,CACxB2C,YAAY,CAAC5C,QAAb,CAAwB,OAAxB,CACD,CACF,CALM,IAKA,IACLJ,MAAM,CAAC4C,GAAP,GAAe,UAAf,EACA5C,MAAM,CAAC4C,GAAP,GAAe,QADf,EAEA5C,MAAM,CAAC4C,GAAP,GAAe,wBAHV,CAIL,CACAI,YAAY,CAACzC,QAAb,gCACKwC,SAAS,CAACxC,QADf,wBAEGP,MAAM,CAAC4C,GAFV,CAEgB,CAACG,SAAS,CAACxC,QAAV,CAAmBP,MAAM,CAAC4C,GAA1B,CAFjB,GAID,CATM,IASA,IAAI5C,MAAM,CAAC4C,GAAP,GAAe,OAAnB,CAA4B,CACjC,GACE,MAAOG,CAAAA,SAAS,CAACzC,MAAV,CAAiB,CAAjB,CAAP,GAA+B,QAA/B,EACA,MAAOyC,CAAAA,SAAS,CAACzC,MAAV,CAAiB,CAAjB,CAAP,GAA+B,QAFjC,CAGE,CACA0C,YAAY,CAAC1C,MAAb,CAAsB,CAACN,MAAM,CAAC6C,MAAR,CAAgBrB,SAAhB,CAAtB,CACD,CALD,IAKO,IAAI,MAAOuB,CAAAA,SAAS,CAACzC,MAAV,CAAiB,CAAjB,CAAP,GAA+B,QAAnC,CAA6C,CAClD0C,YAAY,CAAC1C,MAAb,CAAsB,CAACyC,SAAS,CAACzC,MAAV,CAAiB,CAAjB,CAAD,CAAsBN,MAAM,CAAC6C,MAA7B,CAAtB,CACD,CACF,CACD,GAAMI,CAAAA,QAAQ,gCAAQF,SAAR,EAAsBC,YAAtB,CAAd,CAEA;AACA;AACA;AACA;AACA,MAAOC,CAAAA,QAAP,CACD,CAED,cAAelD,CAAAA,OAAf","sourcesContent":["import {\n  faExclamationCircle,\n  faSlidersH,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useEffect, useReducer, useState } from \"react\";\nimport { FilterResults } from \"./Search\";\nimport { FilterForm, SearchFormState } from \"./Templates/AppTemplate\";\n\nconst Filters: React.FC<{\n  update: (newFilters: FilterResults) => void;\n  updateSearchFormState: (s: Partial<SearchFormState>) => void;\n  searchFormFilterState?: FilterForm\n}> = ({ update, updateSearchFormState, searchFormFilterState }) => {\n  const initialForm: FilterForm = {\n    openDate: \"any\",\n    openNow: false,\n    prices: [0, 3],\n    services: {\n      pickup: true,\n      delivery: true,\n      restaurant_reservation: true,\n    },\n  };\n  let [showFilters, setShowFilters] = useState(false);\n  // let location = useLocation();\n  // let history = useHistory()\n  const [state, dispatch] = useReducer(formReducer, searchFormFilterState || initialForm);\n  //   let [[price1, price2], setPrices] = useState<(number | undefined)[]>([0, 3]);\n  // let onlyOnePriceSet: boolean;\n\n  useEffect(() => {\n    updateSearchFormState({filter: state});\n  }, [state, updateSearchFormState]);\n\n  // useEffect(() => {\n  //   onlyOnePriceSet = !(state.prices[0]! > -1 && state.prices[1]! > -1);\n  // }, [state.prices]);\n\n  const min = (arr: (number | undefined)[]) => {\n    let min = 99;\n    arr.forEach((n) => {\n      if (typeof n === \"number\" && n < min) {\n        min = n;\n      }\n    });\n    return min;\n  };\n\n  useEffect(() => {\n    update({\n      openHours:\n        state.openDate === \"any\" ? \"any\" : state.openNow ? \"now\" : \"today\",\n      priceRange: new Array(\n        state.prices[1] === undefined\n          ? 1\n          : Math.abs(state.prices[0]! - state.prices[1]!) + 1\n      )\n        .fill(0)\n        .map((_, idx) => min(state.prices) + 1 + idx)\n        .join(\",\"),\n      services: Object.entries(state.services)\n        .filter(([_, b]) => b)\n        .map(([e, _]) => e)\n        .join(\",\"),\n    });\n  }, [state, update]);\n\n  const isBetween = (n: number, stops: (number | undefined)[]) => {\n    if (!(typeof stops[0] === \"number\" && typeof stops[1] === \"number\")) {\n      return false;\n    }\n    return (stops[0] < n && n < stops[1]) || (stops[1] < n && n < stops[0]);\n  };\n  const priceArray = new Array(4).fill(\"\").map((a, b) => \"$\".repeat(b + 1));\n  const selectedPriceStyles =\n    \"bg-theme-blue text-white px-1 py-2 rounded-full z-30 \";\n  const intermediatePriceStyles =\n    \"bg-theme-blue-l-3 text-black py-1 px-4 -mx-2 z-20 \";\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        className=\"m-1 px-2 py-1 text-theme-blue border border-theme-blue bg-white rounded shadow font-bold text-sm uppercase tracking-wide\"\n        onClick={() => setShowFilters(!showFilters)}\n      >\n        <FontAwesomeIcon icon={faSlidersH} className=\"mr-2\" />\n        {showFilters ? \"hide\" : \"show\"} filters\n      </button>\n      <div\n        className={\n          \"px-2 pb-2 flex flex-wrap border-b border-theme-extra-light-gray \" +\n          (showFilters ? \"\" : \"hidden\")\n        }\n      >\n        <div className=\"w-full sm:w-1/2\">\n          <span className=\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\">\n            Price Range\n          </span>\n\n          <div className=\"group mt-1 ml-2 mb-3 text-sm\">\n            {priceArray.map((d, idx) => (\n              <button\n                type=\"button\"\n                key={idx}\n                onClick={() => dispatch({ key: \"price\", newVal: idx })}\n                className={\n                  \"relative px-2 \" +\n                  (state.prices.includes(idx) ? selectedPriceStyles : \"\") +\n                  (isBetween(idx, state.prices) ? intermediatePriceStyles : \"\")\n                }\n              >\n                {d}\n              </button>\n            ))}\n          </div>\n          <span className=\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\">\n            Open Hours\n          </span>\n          <label className=\"block px-2\">\n            <input\n              className=\"mr-1\"\n              checked={state.openDate === \"any\"}\n              type=\"radio\"\n              name=\"day\"\n              onChange={() => dispatch({ newVal: \"any\", key: \"openDate\" })}\n            />\n            Any time\n          </label>\n          <label className=\"block px-2\">\n            <input\n              className=\"mr-1\"\n              checked={state.openDate === \"today\"}\n              type=\"radio\"\n              name=\"day\"\n              onChange={() => dispatch({ newVal: \"today\", key: \"openDate\" })}\n            />\n            Today\n            <label className=\"block px-4 -mt-1 mb-2\">\n              <input\n                className=\"mr-1\"\n                checked={state.openNow}\n                type=\"checkbox\"\n                onChange={() => dispatch({ key: \"openNow\" })}\n              />\n              Open now\n            </label>\n          </label>\n        </div>\n        <div className=\"w-full sm:w-1/2\">\n          <span className=\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\">\n            Services Offered\n          </span>\n          <label className=\"block px-2\">\n            <input\n              className=\"mr-1\"\n              checked={state.services.pickup}\n              type=\"checkbox\"\n              onChange={() => dispatch({ key: \"pickup\" })}\n            />\n            Pickup\n          </label>\n          <label className=\"block px-2\">\n            <input\n              className=\"mr-1\"\n              checked={state.services.delivery}\n              type=\"checkbox\"\n              onChange={() => dispatch({ key: \"delivery\" })}\n            />\n            Delivery\n          </label>\n          <label className=\"block px-2\">\n            <input\n              className=\"mr-1\"\n              checked={state.services.restaurant_reservation}\n              type=\"checkbox\"\n              onChange={() => dispatch({ key: \"restaurant_reservation\" })}\n            />\n            Restaurant reservation\n          </label>\n          <div\n            className={\n              !(\n                state.services.pickup ||\n                state.services.delivery ||\n                state.services.restaurant_reservation\n              )\n                ? \"mx-6 my-1 bg-white bg-opacity-50 border-l-4 border-orange-500 px-2 py-1 rounded text-sm italic\"\n                : \"hidden\"\n            }\n          >\n            <FontAwesomeIcon\n              icon={faExclamationCircle}\n              className=\"text-orange-500 mr-2\"\n            />\n            Please select at least one service.\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nfunction formReducer(\n  prevState: FilterForm,\n  update: { newVal?: any; key: string }\n): FilterForm {\n  const stateUpdates: Partial<FilterForm> = {};\n  if (update.key === \"openDate\") {\n    if (update.newVal === \"any\") {\n      stateUpdates.openDate = \"any\";\n      stateUpdates.openNow = false;\n    } else {\n      stateUpdates.openDate = \"today\";\n    }\n  } else if (update.key === \"openNow\") {\n    stateUpdates.openNow = !prevState.openNow;\n    if (stateUpdates.openNow) {\n      stateUpdates.openDate = \"today\";\n    }\n  } else if (\n    update.key === \"delivery\" ||\n    update.key === \"pickup\" ||\n    update.key === \"restaurant_reservation\"\n  ) {\n    stateUpdates.services = {\n      ...prevState.services,\n      [update.key]: !prevState.services[update.key],\n    };\n  } else if (update.key === \"price\") {\n    if (\n      typeof prevState.prices[0] === \"number\" &&\n      typeof prevState.prices[1] === \"number\"\n    ) {\n      stateUpdates.prices = [update.newVal, undefined];\n    } else if (typeof prevState.prices[0] === \"number\") {\n      stateUpdates.prices = [prevState.prices[0], update.newVal];\n    }\n  }\n  const newState = { ...prevState, ...stateUpdates };\n\n  // window.history.replaceState({\n  //   ...window.history.state,\n  //   filter: JSON.stringify(newState)\n  // }, \"\")\n  return newState;\n}\n\nexport default Filters;\n"]},"metadata":{},"sourceType":"module"}