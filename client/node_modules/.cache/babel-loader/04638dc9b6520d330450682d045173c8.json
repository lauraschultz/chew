{"ast":null,"code":"var _jsxFileName = \"/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/src/Filters.tsx\";\nimport { faExclamationCircle, faSlidersH } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useEffect, useReducer, useState } from \"react\";\n\nconst Filters = ({\n  update,\n  updateSearchFormState,\n  searchFormFilterState\n}) => {\n  const initialForm = {\n    openDate: \"any\",\n    openNow: false,\n    prices: [0, 3],\n    services: {\n      pickup: true,\n      delivery: true,\n      restaurant_reservation: true\n    }\n  };\n  let [showFilters, setShowFilters] = useState(false); // let location = useLocation();\n  // let history = useHistory()\n\n  const [state, dispatch] = useReducer(formReducer, searchFormFilterState || initialForm); //   let [[price1, price2], setPrices] = useState<(number | undefined)[]>([0, 3]);\n  // let onlyOnePriceSet: boolean;\n\n  useEffect(() => {\n    updateSearchFormState({\n      filter: state\n    });\n  }, [state, updateSearchFormState]); // useEffect(() => {\n  //   onlyOnePriceSet = !(state.prices[0]! > -1 && state.prices[1]! > -1);\n  // }, [state.prices]);\n\n  const min = arr => {\n    let min = 99;\n    arr.forEach(n => {\n      if (typeof n === \"number\" && n < min) {\n        min = n;\n      }\n    });\n    return min;\n  };\n\n  useEffect(() => {\n    update({\n      openHours: state.openDate === \"any\" ? \"any\" : state.openNow ? \"now\" : \"today\",\n      priceRange: new Array(state.prices[1] === undefined ? 1 : Math.abs(state.prices[0] - state.prices[1]) + 1).fill(0).map((_, idx) => min(state.prices) + 1 + idx).join(\",\"),\n      services: Object.entries(state.services).filter(([_, b]) => b).map(([e, _]) => e).join(\",\")\n    });\n  }, [state, update]);\n\n  const isBetween = (n, stops) => {\n    if (!(typeof stops[0] === \"number\" && typeof stops[1] === \"number\")) {\n      return false;\n    }\n\n    return stops[0] < n && n < stops[1] || stops[1] < n && n < stops[0];\n  };\n\n  const priceArray = new Array(4).fill(\"\").map((a, b) => \"$\".repeat(b + 1));\n  const selectedPriceStyles = \"bg-theme-blue text-white px-1 py-2 rounded-full z-30 \";\n  const intermediatePriceStyles = \"bg-theme-blue-l-3 text-black py-1 px-4 -mx-2 z-20 \";\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"m-1 px-2 py-1 text-theme-blue border border-theme-blue bg-white rounded shadow font-bold text-sm uppercase tracking-wide btn-focus\",\n    onClick: () => setShowFilters(!showFilters),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faSlidersH,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }), showFilters ? \"hide\" : \"show\", \" filters\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-2 pb-2 flex flex-wrap border-b border-theme-extra-light-gray \" + (showFilters ? \"\" : \"hidden\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full sm:w-1/2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-sm font-bold uppercase tracking-wide text-theme-med-gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 6\n    }\n  }, \"Price Range\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"group mt-1 ml-2 mb-3 text-sm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 6\n    }\n  }, priceArray.map((d, idx) => /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    key: idx,\n    onClick: () => dispatch({\n      key: \"price\",\n      newVal: idx\n    }),\n    className: \"relative px-2 btn-focus rounded-full\" + (state.prices.includes(idx) ? selectedPriceStyles : \"\") + (isBetween(idx, state.prices) ? intermediatePriceStyles : \"\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 8\n    }\n  }, d))), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-sm font-bold uppercase tracking-wide text-theme-med-gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 6\n    }\n  }, \"Open Hours\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mr-1 btn-focus rounded-full\",\n    checked: state.openDate === \"any\",\n    type: \"radio\",\n    name: \"day\",\n    onChange: () => dispatch({\n      newVal: \"any\",\n      key: \"openDate\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }), \"Any time\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mr-1 btn-focus rounded-full\",\n    checked: state.openDate === \"today\",\n    type: \"radio\",\n    name: \"day\",\n    onChange: () => dispatch({\n      newVal: \"today\",\n      key: \"openDate\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }), \"Today\", /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block px-4 -mt-1 mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mr-1 btn-focus\",\n    checked: state.openNow,\n    type: \"checkbox\",\n    onChange: () => dispatch({\n      key: \"openNow\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 8\n    }\n  }), \"Open now\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full sm:w-1/2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-sm font-bold uppercase tracking-wide text-theme-med-gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 6\n    }\n  }, \"Services Offered\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mr-1 btn-focus\",\n    checked: state.services.pickup,\n    type: \"checkbox\",\n    onChange: () => dispatch({\n      key: \"pickup\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }), \"Pickup\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mr-1 btn-focus\",\n    checked: state.services.delivery,\n    type: \"checkbox\",\n    onChange: () => dispatch({\n      key: \"delivery\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }), \"Delivery\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block px-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"mr-1 btn-focus\",\n    checked: state.services.restaurant_reservation,\n    type: \"checkbox\",\n    onChange: () => dispatch({\n      key: \"restaurant_reservation\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }), \"Restaurant reservation\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: !(state.services.pickup || state.services.delivery || state.services.restaurant_reservation) ? \"mx-6 my-1 bg-white bg-opacity-50 border-l-4 border-orange-500 px-2 py-1 rounded text-sm italic\" : \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faExclamationCircle,\n    className: \"text-orange-500 mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }), \"Please select at least one service.\"))));\n};\n\nfunction formReducer(prevState, update) {\n  const stateUpdates = {};\n\n  if (update.key === \"openDate\") {\n    if (update.newVal === \"any\") {\n      stateUpdates.openDate = \"any\";\n      stateUpdates.openNow = false;\n    } else {\n      stateUpdates.openDate = \"today\";\n    }\n  } else if (update.key === \"openNow\") {\n    stateUpdates.openNow = !prevState.openNow;\n\n    if (stateUpdates.openNow) {\n      stateUpdates.openDate = \"today\";\n    }\n  } else if (update.key === \"delivery\" || update.key === \"pickup\" || update.key === \"restaurant_reservation\") {\n    stateUpdates.services = { ...prevState.services,\n      [update.key]: !prevState.services[update.key]\n    };\n  } else if (update.key === \"price\") {\n    if (typeof prevState.prices[0] === \"number\" && typeof prevState.prices[1] === \"number\") {\n      stateUpdates.prices = [update.newVal, undefined];\n    } else if (typeof prevState.prices[0] === \"number\") {\n      stateUpdates.prices = [prevState.prices[0], update.newVal];\n    }\n  }\n\n  const newState = { ...prevState,\n    ...stateUpdates\n  }; // window.history.replaceState({\n  //   ...window.history.state,\n  //   filter: JSON.stringify(newState)\n  // }, \"\")\n\n  return newState;\n}\n\nexport default Filters;","map":{"version":3,"sources":["/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/src/Filters.tsx"],"names":["faExclamationCircle","faSlidersH","FontAwesomeIcon","React","useEffect","useReducer","useState","Filters","update","updateSearchFormState","searchFormFilterState","initialForm","openDate","openNow","prices","services","pickup","delivery","restaurant_reservation","showFilters","setShowFilters","state","dispatch","formReducer","filter","min","arr","forEach","n","openHours","priceRange","Array","undefined","Math","abs","fill","map","_","idx","join","Object","entries","b","e","isBetween","stops","priceArray","a","repeat","selectedPriceStyles","intermediatePriceStyles","d","key","newVal","includes","prevState","stateUpdates","newState"],"mappings":"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","sourcesContent":["import {\n\tfaExclamationCircle,\n\tfaSlidersH,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useEffect, useReducer, useState } from \"react\";\nimport { FilterResults } from \"./Search\";\nimport { FilterForm, SearchFormState } from \"./Templates/AppTemplate\";\n\nconst Filters: React.FC<{\n\tupdate: (newFilters: FilterResults) => void;\n\tupdateSearchFormState: (s: Partial<SearchFormState>) => void;\n\tsearchFormFilterState?: FilterForm;\n}> = ({ update, updateSearchFormState, searchFormFilterState }) => {\n\tconst initialForm: FilterForm = {\n\t\topenDate: \"any\",\n\t\topenNow: false,\n\t\tprices: [0, 3],\n\t\tservices: {\n\t\t\tpickup: true,\n\t\t\tdelivery: true,\n\t\t\trestaurant_reservation: true,\n\t\t},\n\t};\n\tlet [showFilters, setShowFilters] = useState(false);\n\t// let location = useLocation();\n\t// let history = useHistory()\n\tconst [state, dispatch] = useReducer(\n\t\tformReducer,\n\t\tsearchFormFilterState || initialForm\n\t);\n\t//   let [[price1, price2], setPrices] = useState<(number | undefined)[]>([0, 3]);\n\t// let onlyOnePriceSet: boolean;\n\n\tuseEffect(() => {\n\t\tupdateSearchFormState({ filter: state });\n\t}, [state, updateSearchFormState]);\n\n\t// useEffect(() => {\n\t//   onlyOnePriceSet = !(state.prices[0]! > -1 && state.prices[1]! > -1);\n\t// }, [state.prices]);\n\n\tconst min = (arr: (number | undefined)[]) => {\n\t\tlet min = 99;\n\t\tarr.forEach((n) => {\n\t\t\tif (typeof n === \"number\" && n < min) {\n\t\t\t\tmin = n;\n\t\t\t}\n\t\t});\n\t\treturn min;\n\t};\n\n\tuseEffect(() => {\n\t\tupdate({\n\t\t\topenHours:\n\t\t\t\tstate.openDate === \"any\" ? \"any\" : state.openNow ? \"now\" : \"today\",\n\t\t\tpriceRange: new Array(\n\t\t\t\tstate.prices[1] === undefined\n\t\t\t\t\t? 1\n\t\t\t\t\t: Math.abs(state.prices[0]! - state.prices[1]!) + 1\n\t\t\t)\n\t\t\t\t.fill(0)\n\t\t\t\t.map((_, idx) => min(state.prices) + 1 + idx)\n\t\t\t\t.join(\",\"),\n\t\t\tservices: Object.entries(state.services)\n\t\t\t\t.filter(([_, b]) => b)\n\t\t\t\t.map(([e, _]) => e)\n\t\t\t\t.join(\",\"),\n\t\t});\n\t}, [state, update]);\n\n\tconst isBetween = (n: number, stops: (number | undefined)[]) => {\n\t\tif (!(typeof stops[0] === \"number\" && typeof stops[1] === \"number\")) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (stops[0] < n && n < stops[1]) || (stops[1] < n && n < stops[0]);\n\t};\n\tconst priceArray = new Array(4).fill(\"\").map((a, b) => \"$\".repeat(b + 1));\n\tconst selectedPriceStyles =\n\t\t\"bg-theme-blue text-white px-1 py-2 rounded-full z-30 \";\n\tconst intermediatePriceStyles =\n\t\t\"bg-theme-blue-l-3 text-black py-1 px-4 -mx-2 z-20 \";\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName=\"m-1 px-2 py-1 text-theme-blue border border-theme-blue bg-white rounded shadow font-bold text-sm uppercase tracking-wide btn-focus\"\n\t\t\t\tonClick={() => setShowFilters(!showFilters)}\n\t\t\t>\n\t\t\t\t<FontAwesomeIcon icon={faSlidersH} className=\"mr-2\" />\n\t\t\t\t{showFilters ? \"hide\" : \"show\"} filters\n\t\t\t</button>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\t\"px-2 pb-2 flex flex-wrap border-b border-theme-extra-light-gray \" +\n\t\t\t\t\t(showFilters ? \"\" : \"hidden\")\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div className=\"w-full sm:w-1/2\">\n\t\t\t\t\t<span className=\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\">\n\t\t\t\t\t\tPrice Range\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<div className=\"group mt-1 ml-2 mb-3 text-sm\">\n\t\t\t\t\t\t{priceArray.map((d, idx) => (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\t\t\tonClick={() => dispatch({ key: \"price\", newVal: idx })}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"relative px-2 btn-focus rounded-full\" +\n\t\t\t\t\t\t\t\t\t(state.prices.includes(idx) ? selectedPriceStyles : \"\") +\n\t\t\t\t\t\t\t\t\t(isBetween(idx, state.prices) ? intermediatePriceStyles : \"\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{d}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\">\n\t\t\t\t\t\tOpen Hours\n\t\t\t\t\t</span>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus rounded-full\"\n\t\t\t\t\t\t\tchecked={state.openDate === \"any\"}\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"day\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ newVal: \"any\", key: \"openDate\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tAny time\n\t\t\t\t\t</label>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus rounded-full\"\n\t\t\t\t\t\t\tchecked={state.openDate === \"today\"}\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"day\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ newVal: \"today\", key: \"openDate\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tToday\n\t\t\t\t\t\t<label className=\"block px-4 -mt-1 mb-2\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus\"\n\t\t\t\t\t\t\t\tchecked={state.openNow}\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tonChange={() => dispatch({ key: \"openNow\" })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tOpen now\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full sm:w-1/2\">\n\t\t\t\t\t<span className=\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\">\n\t\t\t\t\t\tServices Offered\n\t\t\t\t\t</span>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus\"\n\t\t\t\t\t\t\tchecked={state.services.pickup}\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ key: \"pickup\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tPickup\n\t\t\t\t\t</label>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus\"\n\t\t\t\t\t\t\tchecked={state.services.delivery}\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ key: \"delivery\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tDelivery\n\t\t\t\t\t</label>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus\"\n\t\t\t\t\t\t\tchecked={state.services.restaurant_reservation}\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ key: \"restaurant_reservation\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tRestaurant reservation\n\t\t\t\t\t</label>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\tstate.services.pickup ||\n\t\t\t\t\t\t\t\tstate.services.delivery ||\n\t\t\t\t\t\t\t\tstate.services.restaurant_reservation\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t? \"mx-6 my-1 bg-white bg-opacity-50 border-l-4 border-orange-500 px-2 py-1 rounded text-sm italic\"\n\t\t\t\t\t\t\t\t: \"hidden\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\t\ticon={faExclamationCircle}\n\t\t\t\t\t\t\tclassName=\"text-orange-500 mr-2\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tPlease select at least one service.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nfunction formReducer(\n\tprevState: FilterForm,\n\tupdate: { newVal?: any; key: string }\n): FilterForm {\n\tconst stateUpdates: Partial<FilterForm> = {};\n\tif (update.key === \"openDate\") {\n\t\tif (update.newVal === \"any\") {\n\t\t\tstateUpdates.openDate = \"any\";\n\t\t\tstateUpdates.openNow = false;\n\t\t} else {\n\t\t\tstateUpdates.openDate = \"today\";\n\t\t}\n\t} else if (update.key === \"openNow\") {\n\t\tstateUpdates.openNow = !prevState.openNow;\n\t\tif (stateUpdates.openNow) {\n\t\t\tstateUpdates.openDate = \"today\";\n\t\t}\n\t} else if (\n\t\tupdate.key === \"delivery\" ||\n\t\tupdate.key === \"pickup\" ||\n\t\tupdate.key === \"restaurant_reservation\"\n\t) {\n\t\tstateUpdates.services = {\n\t\t\t...prevState.services,\n\t\t\t[update.key]: !prevState.services[update.key],\n\t\t};\n\t} else if (update.key === \"price\") {\n\t\tif (\n\t\t\ttypeof prevState.prices[0] === \"number\" &&\n\t\t\ttypeof prevState.prices[1] === \"number\"\n\t\t) {\n\t\t\tstateUpdates.prices = [update.newVal, undefined];\n\t\t} else if (typeof prevState.prices[0] === \"number\") {\n\t\t\tstateUpdates.prices = [prevState.prices[0], update.newVal];\n\t\t}\n\t}\n\tconst newState = { ...prevState, ...stateUpdates };\n\n\t// window.history.replaceState({\n\t//   ...window.history.state,\n\t//   filter: JSON.stringify(newState)\n\t// }, \"\")\n\treturn newState;\n}\n\nexport default Filters;\n"]},"metadata":{},"sourceType":"module"}