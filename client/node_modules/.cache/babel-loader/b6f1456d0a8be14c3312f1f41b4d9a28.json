{"ast":null,"code":"import _defineProperty from\"/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{faExclamationCircle,faSlidersH}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import React,{useEffect,useReducer,useState}from\"react\";var Filters=function Filters(_ref){var update=_ref.update,updateSearchFormState=_ref.updateSearchFormState,searchFormFilterState=_ref.searchFormFilterState;var initialForm={openDate:\"any\",openNow:false,prices:[0,3],services:{pickup:true,delivery:true,restaurant_reservation:true}};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showFilters=_useState2[0],setShowFilters=_useState2[1];// let location = useLocation();\n// let history = useHistory()\nvar _useReducer=useReducer(formReducer,searchFormFilterState||initialForm),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//   let [[price1, price2], setPrices] = useState<(number | undefined)[]>([0, 3]);\n// let onlyOnePriceSet: boolean;\nuseEffect(function(){updateSearchFormState({filter:state});},[state,updateSearchFormState]);// useEffect(() => {\n//   onlyOnePriceSet = !(state.prices[0]! > -1 && state.prices[1]! > -1);\n// }, [state.prices]);\nvar min=function min(arr){var min=99;arr.forEach(function(n){if(typeof n===\"number\"&&n<min){min=n;}});return min;};useEffect(function(){update({openHours:state.openDate===\"any\"?\"any\":state.openNow?\"now\":\"today\",priceRange:new Array(state.prices[1]===undefined?1:Math.abs(state.prices[0]-state.prices[1])+1).fill(0).map(function(_,idx){return min(state.prices)+1+idx;}).join(\",\"),services:Object.entries(state.services).filter(function(_ref2){var _ref3=_slicedToArray(_ref2,2),_=_ref3[0],b=_ref3[1];return b;}).map(function(_ref4){var _ref5=_slicedToArray(_ref4,2),e=_ref5[0],_=_ref5[1];return e;}).join(\",\")});},[state,update]);var isBetween=function isBetween(n,stops){if(!(typeof stops[0]===\"number\"&&typeof stops[1]===\"number\")){return false;}return stops[0]<n&&n<stops[1]||stops[1]<n&&n<stops[0];};var priceArray=new Array(4).fill(\"\").map(function(a,b){return\"$\".repeat(b+1);});var selectedPriceStyles=\"bg-theme-blue text-white px-1 py-2 rounded-full z-30 \";var intermediatePriceStyles=\"bg-theme-blue-l-3 text-black py-1 px-4 -mx-2 z-20 \";return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"m-1 px-2 py-1 text-theme-blue border border-theme-blue bg-white rounded shadow font-bold text-sm uppercase tracking-wide btn-focus\",onClick:function onClick(){return setShowFilters(!showFilters);}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faSlidersH,className:\"mr-2\"}),showFilters?\"hide\":\"show\",\" filters\"),/*#__PURE__*/React.createElement(\"div\",{className:\"px-2 pb-2 flex flex-wrap border-b border-theme-extra-light-gray \"+(showFilters?\"\":\"hidden\")},/*#__PURE__*/React.createElement(\"div\",{className:\"w-full sm:w-1/2\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\"},\"Price Range\"),/*#__PURE__*/React.createElement(\"div\",{className:\"group mt-1 ml-2 mb-3 text-sm\"},priceArray.map(function(d,idx){return/*#__PURE__*/React.createElement(\"button\",{type:\"button\",key:idx,onClick:function onClick(){return dispatch({key:\"price\",newVal:idx});},className:\"relative px-2 btn-focus rounded-full\"+(state.prices.includes(idx)?selectedPriceStyles:\"\")+(isBetween(idx,state.prices)?intermediatePriceStyles:\"\")},d);})),/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\"},\"Open Hours\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1 btn-focus rounded-full\",checked:state.openDate===\"any\",type:\"radio\",name:\"day\",onChange:function onChange(){return dispatch({newVal:\"any\",key:\"openDate\"});}}),\"Any time\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1 btn-focus rounded-full\",checked:state.openDate===\"today\",type:\"radio\",name:\"day\",onChange:function onChange(){return dispatch({newVal:\"today\",key:\"openDate\"});}}),\"Today\",/*#__PURE__*/React.createElement(\"label\",{className:\"block px-4 -mt-1 mb-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1 btn-focus\",checked:state.openNow,type:\"checkbox\",onChange:function onChange(){return dispatch({key:\"openNow\"});}}),\"Open now\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full sm:w-1/2\"},/*#__PURE__*/React.createElement(\"span\",{className:\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\"},\"Services Offered\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1 btn-focus\",checked:state.services.pickup,type:\"checkbox\",onChange:function onChange(){return dispatch({key:\"pickup\"});}}),\"Pickup\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1 btn-focus\",checked:state.services.delivery,type:\"checkbox\",onChange:function onChange(){return dispatch({key:\"delivery\"});}}),\"Delivery\"),/*#__PURE__*/React.createElement(\"label\",{className:\"block px-2\"},/*#__PURE__*/React.createElement(\"input\",{className:\"mr-1 btn-focus\",checked:state.services.restaurant_reservation,type:\"checkbox\",onChange:function onChange(){return dispatch({key:\"restaurant_reservation\"});}}),\"Restaurant reservation\"),/*#__PURE__*/React.createElement(\"div\",{className:!(state.services.pickup||state.services.delivery||state.services.restaurant_reservation)?\"mx-6 my-1 bg-white bg-opacity-50 border-l-4 border-orange-500 px-2 py-1 rounded text-sm italic\":\"hidden\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faExclamationCircle,className:\"text-orange-500 mr-2\"}),\"Please select at least one service.\"))));};function formReducer(prevState,update){var stateUpdates={};if(update.key===\"openDate\"){if(update.newVal===\"any\"){stateUpdates.openDate=\"any\";stateUpdates.openNow=false;}else{stateUpdates.openDate=\"today\";}}else if(update.key===\"openNow\"){stateUpdates.openNow=!prevState.openNow;if(stateUpdates.openNow){stateUpdates.openDate=\"today\";}}else if(update.key===\"delivery\"||update.key===\"pickup\"||update.key===\"restaurant_reservation\"){stateUpdates.services=_objectSpread(_objectSpread({},prevState.services),{},_defineProperty({},update.key,!prevState.services[update.key]));}else if(update.key===\"price\"){if(typeof prevState.prices[0]===\"number\"&&typeof prevState.prices[1]===\"number\"){stateUpdates.prices=[update.newVal,undefined];}else if(typeof prevState.prices[0]===\"number\"){stateUpdates.prices=[prevState.prices[0],update.newVal];}}var newState=_objectSpread(_objectSpread({},prevState),stateUpdates);// window.history.replaceState({\n//   ...window.history.state,\n//   filter: JSON.stringify(newState)\n// }, \"\")\nreturn newState;}export default Filters;","map":{"version":3,"sources":["/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/src/Filters.tsx"],"names":["faExclamationCircle","faSlidersH","FontAwesomeIcon","React","useEffect","useReducer","useState","Filters","update","updateSearchFormState","searchFormFilterState","initialForm","openDate","openNow","prices","services","pickup","delivery","restaurant_reservation","showFilters","setShowFilters","formReducer","state","dispatch","filter","min","arr","forEach","n","openHours","priceRange","Array","undefined","Math","abs","fill","map","_","idx","join","Object","entries","b","e","isBetween","stops","priceArray","a","repeat","selectedPriceStyles","intermediatePriceStyles","d","key","newVal","includes","prevState","stateUpdates","newState"],"mappings":"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","sourcesContent":["import {\n\tfaExclamationCircle,\n\tfaSlidersH,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useEffect, useReducer, useState } from \"react\";\nimport { FilterResults } from \"./Search\";\nimport { FilterForm, SearchFormState } from \"./Templates/AppTemplate\";\n\nconst Filters: React.FC<{\n\tupdate: (newFilters: FilterResults) => void;\n\tupdateSearchFormState: (s: Partial<SearchFormState>) => void;\n\tsearchFormFilterState?: FilterForm;\n}> = ({ update, updateSearchFormState, searchFormFilterState }) => {\n\tconst initialForm: FilterForm = {\n\t\topenDate: \"any\",\n\t\topenNow: false,\n\t\tprices: [0, 3],\n\t\tservices: {\n\t\t\tpickup: true,\n\t\t\tdelivery: true,\n\t\t\trestaurant_reservation: true,\n\t\t},\n\t};\n\tlet [showFilters, setShowFilters] = useState(false);\n\t// let location = useLocation();\n\t// let history = useHistory()\n\tconst [state, dispatch] = useReducer(\n\t\tformReducer,\n\t\tsearchFormFilterState || initialForm\n\t);\n\t//   let [[price1, price2], setPrices] = useState<(number | undefined)[]>([0, 3]);\n\t// let onlyOnePriceSet: boolean;\n\n\tuseEffect(() => {\n\t\tupdateSearchFormState({ filter: state });\n\t}, [state, updateSearchFormState]);\n\n\t// useEffect(() => {\n\t//   onlyOnePriceSet = !(state.prices[0]! > -1 && state.prices[1]! > -1);\n\t// }, [state.prices]);\n\n\tconst min = (arr: (number | undefined)[]) => {\n\t\tlet min = 99;\n\t\tarr.forEach((n) => {\n\t\t\tif (typeof n === \"number\" && n < min) {\n\t\t\t\tmin = n;\n\t\t\t}\n\t\t});\n\t\treturn min;\n\t};\n\n\tuseEffect(() => {\n\t\tupdate({\n\t\t\topenHours:\n\t\t\t\tstate.openDate === \"any\" ? \"any\" : state.openNow ? \"now\" : \"today\",\n\t\t\tpriceRange: new Array(\n\t\t\t\tstate.prices[1] === undefined\n\t\t\t\t\t? 1\n\t\t\t\t\t: Math.abs(state.prices[0]! - state.prices[1]!) + 1\n\t\t\t)\n\t\t\t\t.fill(0)\n\t\t\t\t.map((_, idx) => min(state.prices) + 1 + idx)\n\t\t\t\t.join(\",\"),\n\t\t\tservices: Object.entries(state.services)\n\t\t\t\t.filter(([_, b]) => b)\n\t\t\t\t.map(([e, _]) => e)\n\t\t\t\t.join(\",\"),\n\t\t});\n\t}, [state, update]);\n\n\tconst isBetween = (n: number, stops: (number | undefined)[]) => {\n\t\tif (!(typeof stops[0] === \"number\" && typeof stops[1] === \"number\")) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (stops[0] < n && n < stops[1]) || (stops[1] < n && n < stops[0]);\n\t};\n\tconst priceArray = new Array(4).fill(\"\").map((a, b) => \"$\".repeat(b + 1));\n\tconst selectedPriceStyles =\n\t\t\"bg-theme-blue text-white px-1 py-2 rounded-full z-30 \";\n\tconst intermediatePriceStyles =\n\t\t\"bg-theme-blue-l-3 text-black py-1 px-4 -mx-2 z-20 \";\n\n\treturn (\n\t\t<>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName=\"m-1 px-2 py-1 text-theme-blue border border-theme-blue bg-white rounded shadow font-bold text-sm uppercase tracking-wide btn-focus\"\n\t\t\t\tonClick={() => setShowFilters(!showFilters)}\n\t\t\t>\n\t\t\t\t<FontAwesomeIcon icon={faSlidersH} className=\"mr-2\" />\n\t\t\t\t{showFilters ? \"hide\" : \"show\"} filters\n\t\t\t</button>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\t\"px-2 pb-2 flex flex-wrap border-b border-theme-extra-light-gray \" +\n\t\t\t\t\t(showFilters ? \"\" : \"hidden\")\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<div className=\"w-full sm:w-1/2\">\n\t\t\t\t\t<span className=\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\">\n\t\t\t\t\t\tPrice Range\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<div className=\"group mt-1 ml-2 mb-3 text-sm\">\n\t\t\t\t\t\t{priceArray.map((d, idx) => (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\t\t\tonClick={() => dispatch({ key: \"price\", newVal: idx })}\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\"relative px-2 btn-focus rounded-full\" +\n\t\t\t\t\t\t\t\t\t(state.prices.includes(idx) ? selectedPriceStyles : \"\") +\n\t\t\t\t\t\t\t\t\t(isBetween(idx, state.prices) ? intermediatePriceStyles : \"\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{d}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span className=\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\">\n\t\t\t\t\t\tOpen Hours\n\t\t\t\t\t</span>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus rounded-full\"\n\t\t\t\t\t\t\tchecked={state.openDate === \"any\"}\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"day\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ newVal: \"any\", key: \"openDate\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tAny time\n\t\t\t\t\t</label>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus rounded-full\"\n\t\t\t\t\t\t\tchecked={state.openDate === \"today\"}\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"day\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ newVal: \"today\", key: \"openDate\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tToday\n\t\t\t\t\t\t<label className=\"block px-4 -mt-1 mb-2\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus\"\n\t\t\t\t\t\t\t\tchecked={state.openNow}\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tonChange={() => dispatch({ key: \"openNow\" })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tOpen now\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"w-full sm:w-1/2\">\n\t\t\t\t\t<span className=\"text-sm font-bold uppercase tracking-wide text-theme-med-gray\">\n\t\t\t\t\t\tServices Offered\n\t\t\t\t\t</span>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus\"\n\t\t\t\t\t\t\tchecked={state.services.pickup}\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ key: \"pickup\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tPickup\n\t\t\t\t\t</label>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus\"\n\t\t\t\t\t\t\tchecked={state.services.delivery}\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ key: \"delivery\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tDelivery\n\t\t\t\t\t</label>\n\t\t\t\t\t<label className=\"block px-2\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"mr-1 btn-focus\"\n\t\t\t\t\t\t\tchecked={state.services.restaurant_reservation}\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tonChange={() => dispatch({ key: \"restaurant_reservation\" })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tRestaurant reservation\n\t\t\t\t\t</label>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\tstate.services.pickup ||\n\t\t\t\t\t\t\t\tstate.services.delivery ||\n\t\t\t\t\t\t\t\tstate.services.restaurant_reservation\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t? \"mx-6 my-1 bg-white bg-opacity-50 border-l-4 border-orange-500 px-2 py-1 rounded text-sm italic\"\n\t\t\t\t\t\t\t\t: \"hidden\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FontAwesomeIcon\n\t\t\t\t\t\t\ticon={faExclamationCircle}\n\t\t\t\t\t\t\tclassName=\"text-orange-500 mr-2\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tPlease select at least one service.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nfunction formReducer(\n\tprevState: FilterForm,\n\tupdate: { newVal?: any; key: string }\n): FilterForm {\n\tconst stateUpdates: Partial<FilterForm> = {};\n\tif (update.key === \"openDate\") {\n\t\tif (update.newVal === \"any\") {\n\t\t\tstateUpdates.openDate = \"any\";\n\t\t\tstateUpdates.openNow = false;\n\t\t} else {\n\t\t\tstateUpdates.openDate = \"today\";\n\t\t}\n\t} else if (update.key === \"openNow\") {\n\t\tstateUpdates.openNow = !prevState.openNow;\n\t\tif (stateUpdates.openNow) {\n\t\t\tstateUpdates.openDate = \"today\";\n\t\t}\n\t} else if (\n\t\tupdate.key === \"delivery\" ||\n\t\tupdate.key === \"pickup\" ||\n\t\tupdate.key === \"restaurant_reservation\"\n\t) {\n\t\tstateUpdates.services = {\n\t\t\t...prevState.services,\n\t\t\t[update.key]: !prevState.services[update.key],\n\t\t};\n\t} else if (update.key === \"price\") {\n\t\tif (\n\t\t\ttypeof prevState.prices[0] === \"number\" &&\n\t\t\ttypeof prevState.prices[1] === \"number\"\n\t\t) {\n\t\t\tstateUpdates.prices = [update.newVal, undefined];\n\t\t} else if (typeof prevState.prices[0] === \"number\") {\n\t\t\tstateUpdates.prices = [prevState.prices[0], update.newVal];\n\t\t}\n\t}\n\tconst newState = { ...prevState, ...stateUpdates };\n\n\t// window.history.replaceState({\n\t//   ...window.history.state,\n\t//   filter: JSON.stringify(newState)\n\t// }, \"\")\n\treturn newState;\n}\n\nexport default Filters;\n"]},"metadata":{},"sourceType":"module"}