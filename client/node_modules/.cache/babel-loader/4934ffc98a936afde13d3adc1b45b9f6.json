{"ast":null,"code":"var _jsxFileName = \"/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/src/DisplayItem.tsx\";\nimport { faCircle, faChevronCircleUp, faChevronCircleDown, faDollarSign, faClock, faMapPin, faCheck, faExternalLinkAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { useState } from \"react\";\nimport { icons } from \"./VotingIcons\";\nexport const DisplayItem = ({\n  restaurant,\n  addRestaurant,\n  vote\n}) => {\n  let [expanded, setExpanded] = useState(false); // let {userState} = useContext(UserContext);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: restaurant.business.id,\n    className: \"relative p-1 lg:p-2 my-2 max-w-md mx-auto flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"fa-layers fa-fw fa-2x absolute m-2 right-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \" text-white\",\n    icon: faCircle,\n    onClick: () => setExpanded(prev => !prev),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \" text-theme-yellow\",\n    icon: expanded ? faChevronCircleUp : faChevronCircleDown,\n    onClick: () => setExpanded(prev => !prev),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-initial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, addRestaurant), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"leading-tight font-display italic font-bold text-xl text-theme-dark-gray mr-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, restaurant.business.name, restaurant.business.price && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-2 px-1 pt-1 rounded bg-theme-light-gray text-white text-sm whitespace-no-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, restaurant.business.price.split(\"\").map((_, i) => /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faDollarSign,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pl-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-theme-light-gray font-display leading-none mr-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, restaurant.business.categories.map(c => c.title).join(\", \")), restaurant.business.hours && restaurant.business.hours[0] && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-theme-light-gray uppercase font-bold tracking-wide text-sm leading-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faClock,\n    className: \"mr-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }), openMsg(restaurant.business.hours[0])), restaurant.votes.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, restaurant.votes.map((v, idx) => v ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"m-1 border-theme-dark-gray rounded-sm border bg-white bg-opacity-50 shadow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"bg-theme-dark-gray text-white px-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: icons[idx].icon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"px-2 text-theme-dark-gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, v)) : null)), !addRestaurant ? vote : null, expanded && /*#__PURE__*/React.createElement(React.Fragment, null, addRestaurant ? vote : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-around mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-shrink-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(HoursTable, {\n    hours: restaurant.business.hours,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-initial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faMapPin,\n    className: \"flex-none mt-1 mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-initial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, restaurant.business.location.display_address.map(line => /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 27\n    }\n  }, line)))), restaurant.business.transactions && restaurant.business.transactions.length > 0 && /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"uppercase tracking-wide font-bold text-theme-med-gray text-sm font-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, \"Services offered:\"), restaurant.business.transactions.map(t => /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCheck,\n    className: \"mr-2 text-green-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }), t))), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"block text-center rounded w-full py-1 px-3 bg-theme-red text-white font-bold italic mt-3\",\n    href: restaurant.business.url,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, \"more info\", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faExternalLinkAlt,\n    className: \"ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }))))))));\n};\n\nconst HoursTable = ({\n  hours\n}) => {\n  if (!hours || !hours[0]) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-theme-light-gray py-2 px-4 rounded my-3 border border-theme-light-gray italic text-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 7\n      }\n    }, \"No hours available.\");\n  }\n\n  let days = [\"Mon\", \"Tues\", \"Weds\", \"Thurs\", \"Fri\", \"Sat\", \"Sun\"].map(d => ({\n    day: d,\n    hourStr: new Array()\n  }));\n\n  let dateify = (start, end) => `${formatAsTime(start)} - ${formatAsTime(end)}`;\n\n  hours[0].open.forEach(h => days[h.day].hourStr.push(dateify(h.start, h.end)));\n  return /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }, days.map(day => /*#__PURE__*/React.createElement(\"tr\", {\n    key: day.day,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"text-left py-0 align-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, day.day), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"py-0 pl-3 whitespace-pre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, day.hourStr.length > 0 ? day.hourStr.join(\",\\n\") : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"italic text-theme-light-gray\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, \"Closed\"))))));\n};\n\nconst formatAsTime = time => `${time.slice(0, 2)}:${time.slice(2)}`;\n\nconst openMsg = hours => {\n  const padZeros = n => (\"00\" + n).slice(-2);\n\n  const today = new Date();\n  const dayOfWeek = ((today.getDay() - 1) % 6 + 6) % 6;\n  const timeString = padZeros(today.getHours()) + padZeros(today.getMinutes());\n  console.log(`day of week: ${dayOfWeek}, timeString: ${timeString}`);\n  let diff = 9999999;\n  const days = hours.open.filter(h => h.day === dayOfWeek);\n\n  if (days.length === 0) {\n    return \"Closed\";\n  }\n\n  let t = undefined;\n\n  for (let h of days) {\n    if (timeString < h.start) {\n      // will open later\n      const currentDiff = +h.start - +timeString;\n\n      if (currentDiff < diff) {\n        t = formatAsTime(h.start);\n        diff = currentDiff;\n      }\n    } else if (timeString < h.end) {\n      // open now\n      return \"Open now\";\n    }\n  }\n\n  if (t) {\n    return `Opens at ${t}`;\n  }\n\n  return \"Closed\";\n};\n\nexport default DisplayItem;","map":{"version":3,"sources":["/Users/lauraschultz/Documents/projects/yelp-restaurant-chooser/client/src/DisplayItem.tsx"],"names":["faCircle","faChevronCircleUp","faChevronCircleDown","faDollarSign","faClock","faMapPin","faCheck","faExternalLinkAlt","FontAwesomeIcon","React","useState","icons","DisplayItem","restaurant","addRestaurant","vote","expanded","setExpanded","business","id","prev","name","price","split","map","_","i","categories","c","title","join","hours","openMsg","votes","length","v","idx","icon","location","display_address","line","transactions","t","url","HoursTable","days","d","day","hourStr","Array","dateify","start","end","formatAsTime","open","forEach","h","push","time","slice","padZeros","n","today","Date","dayOfWeek","getDay","timeString","getHours","getMinutes","console","log","diff","filter","undefined","currentDiff"],"mappings":"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","sourcesContent":["import {\n  faCircle,\n  faChevronCircleUp,\n  faChevronCircleDown,\n  faDollarSign,\n  faClock,\n  faMapPin,\n  faCheck,\n  faExternalLinkAlt,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { ReactNode, useState } from \"react\";\nimport { icons } from \"./VotingIcons\";\nimport { BusinessWithVotes, Hours } from \"../../shared/types\";\n\nexport const DisplayItem: React.FC<{\n  restaurant: BusinessWithVotes;\n  addRestaurant?: ReactNode;\n  vote?: ReactNode;\n}> = ({ restaurant, addRestaurant, vote }) => {\n  let [expanded, setExpanded] = useState(false);\n  // let {userState} = useContext(UserContext);\n  return (\n    <div\n      key={restaurant.business.id}\n      className=\"relative p-1 lg:p-2 my-2 max-w-md mx-auto flex\"\n    >\n      <button className=\"fa-layers fa-fw fa-2x absolute m-2 right-0\">\n        <FontAwesomeIcon\n          className=\" text-white\"\n          icon={faCircle}\n          onClick={() => setExpanded((prev) => !prev)}\n        />\n        <FontAwesomeIcon\n          className=\" text-theme-yellow\"\n          icon={expanded ? faChevronCircleUp : faChevronCircleDown}\n          onClick={() => setExpanded((prev) => !prev)}\n        />\n      </button>\n\n      <div className=\"flex-initial\">{addRestaurant}</div>\n\n      <div className=\"flex-1\">\n        \n        <h2 className=\"leading-tight font-display italic font-bold text-xl text-theme-dark-gray mr-6\">\n          {restaurant.business.name}\n          {restaurant.business.price && (\n            <span className=\"ml-2 px-1 pt-1 rounded bg-theme-light-gray text-white text-sm whitespace-no-wrap\">\n              {restaurant.business.price.split(\"\").map((_, i) => (\n                <FontAwesomeIcon icon={faDollarSign} key={i} />\n              ))}\n            </span>\n          )}\n        </h2>\n        <div className=\"pl-3\">\n          <div className=\"text-theme-light-gray font-display leading-none mr-6\">\n            {restaurant.business.categories.map((c) => c.title).join(\", \")}\n          </div>\n          {restaurant.business.hours && restaurant.business.hours[0] && (\n            <div className=\"text-theme-light-gray uppercase font-bold tracking-wide text-sm leading-none\">\n              <FontAwesomeIcon icon={faClock} className=\"mr-1\" />\n              {openMsg(restaurant.business.hours[0])}\n            </div>\n          )}\n\n          {restaurant.votes.length > 0 && (\n            <div className=\"my-1\">\n              {restaurant.votes.map((v, idx) =>\n                v ? (\n                  <span className=\"m-1 border-theme-dark-gray rounded-sm border bg-white bg-opacity-50 shadow\">\n                    <span className=\"bg-theme-dark-gray text-white px-1\">\n                      <FontAwesomeIcon icon={icons[idx].icon} />\n                    </span>\n                    <span className=\"px-2 text-theme-dark-gray\">{v}</span>\n                  </span>\n                ) : null\n              )}\n            </div>\n          )}\n          {!addRestaurant ? vote : null}\n          {expanded && (\n            <>\n              {addRestaurant ? vote : null}\n\n              <div className=\"flex justify-around mt-2\">\n                <div className=\"flex-shrink-0\">\n                  <HoursTable hours={restaurant.business.hours} />\n                </div>\n                <div className=\"flex-initial\">\n                  <div className=\"flex\">\n                    <FontAwesomeIcon\n                      icon={faMapPin}\n                      className=\"flex-none mt-1 mr-2\"\n                    />\n\n                    <div className=\"flex-initial\">\n                      {restaurant.business.location.display_address.map(\n                        (line) => (\n                          <p>{line}</p>\n                        )\n                      )}\n                    </div>\n                  </div>\n                  {restaurant.business.transactions &&\n                    restaurant.business.transactions.length > 0 && (\n                      <ul className=\"mt-3\">\n                        <h3 className=\"uppercase tracking-wide font-bold text-theme-med-gray text-sm font-light\">\n                          Services offered:\n                        </h3>\n\n                        {restaurant.business.transactions.map((t) => (\n                          <li>\n                            <FontAwesomeIcon\n                              icon={faCheck}\n                              className=\"mr-2 text-green-500\"\n                            />\n                            {t}\n                          </li>\n                        ))}\n                      </ul>\n                    )}\n\n                  <a\n                    className=\"block text-center rounded w-full py-1 px-3 bg-theme-red text-white font-bold italic mt-3\"\n                    href={restaurant.business.url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    more info\n                    <FontAwesomeIcon\n                      icon={faExternalLinkAlt}\n                      className=\"ml-2\"\n                    />\n                  </a>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst HoursTable: React.FC<{ hours: [Hours] | undefined }> = ({ hours }) => {\n  if (!hours || !hours[0]) {\n    return (\n      <div className=\"text-theme-light-gray py-2 px-4 rounded my-3 border border-theme-light-gray italic text-sm\">\n        No hours available.\n      </div>\n    );\n  }\n  let days = [\n    \"Mon\",\n    \"Tues\",\n    \"Weds\",\n    \"Thurs\",\n    \"Fri\",\n    \"Sat\",\n    \"Sun\",\n  ].map((d: string) => ({ day: d, hourStr: new Array<string>() }));\n  let dateify = (start: string, end: string): string =>\n    `${formatAsTime(start)} - ${formatAsTime(end)}`;\n  hours[0].open.forEach((h) =>\n    days[h.day].hourStr.push(dateify(h.start, h.end))\n  );\n  return (\n    <table>\n      <tbody>\n        {days.map((day) => (\n          <tr key={day.day}>\n            <th className=\"text-left py-0 align-top\">{day.day}</th>\n            <td className=\"py-0 pl-3 whitespace-pre\">\n              {day.hourStr.length > 0 ? (\n                day.hourStr.join(\",\\n\")\n              ) : (\n                <span className=\"italic text-theme-light-gray\">Closed</span>\n              )}\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n\nconst formatAsTime = (time: string): string =>\n  `${time.slice(0, 2)}:${time.slice(2)}`;\n\nconst openMsg = (hours: Hours): string => {\n  const padZeros = (n: number) => (\"00\" + n).slice(-2);\n  const today = new Date();\n  const dayOfWeek = (((today.getDay() - 1) % 6) + 6) % 6;\n  const timeString = padZeros(today.getHours()) + padZeros(today.getMinutes());\n  console.log(`day of week: ${dayOfWeek}, timeString: ${timeString}`);\n  let diff = 9999999;\n  const days = hours.open.filter((h) => h.day === dayOfWeek);\n  if (days.length === 0) {\n    return \"Closed\";\n  }\n  let t: string | undefined = undefined;\n  for (let h of days) {\n    if (timeString < h.start) {\n      // will open later\n      const currentDiff = +h.start - +timeString;\n      if (currentDiff < diff) {\n        t = formatAsTime(h.start);\n        diff = currentDiff;\n      }\n    } else if (timeString < h.end) {\n      // open now\n      return \"Open now\";\n    }\n  }\n  if (t) {\n    return `Opens at ${t}`;\n  }\n  return \"Closed\";\n};\n\nexport default DisplayItem;\n"]},"metadata":{},"sourceType":"module"}